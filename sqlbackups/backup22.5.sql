-- phpMyAdmin SQL Dump
-- version 5.0.2
-- https://www.phpmyadmin.net/
--
-- Host: 127.0.0.1
-- Generation Time: May 22, 2020 at 09:00 AM
-- Server version: 10.4.11-MariaDB
-- PHP Version: 7.4.5

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Database: `project`
--

-- --------------------------------------------------------

--
-- Table structure for table `carries`
--

CREATE TABLE `carries` (
  `store_id` int(11) NOT NULL,
  `barcode` varchar(45) COLLATE utf8mb4_unicode_ci NOT NULL,
  `self` int(11) DEFAULT NULL,
  `aisle` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `carries`
--

INSERT INTO `carries` (`store_id`, `barcode`, `self`, `aisle`) VALUES
(2, '031118566', 28, 31),
(2, '037639676', 39, 7),
(2, '055493685', 48, 18),
(2, '056231385', 44, 11),
(2, '084701003', 48, 25),
(2, '134474971', 21, 15),
(2, '158283846', 34, 37),
(2, '169165199', 35, 15),
(2, '178191875', 24, 4),
(2, '189831806', 49, 42),
(2, '233875714', 44, 18),
(2, '234594998', 48, 26),
(2, '248101425', 35, 19),
(2, '267197813', 9, 28),
(2, '283528929', 45, 48),
(2, '376561556', 9, 38),
(2, '396539472', 35, 9),
(2, '431199250', 0, 11),
(2, '456073283', 0, 46),
(2, '469226948', 44, 18),
(2, '545322544', 2, 49),
(2, '547919357', 35, 20),
(2, '587993087', 4, 7),
(2, '601419281', 5, 19),
(2, '609446507', 24, 28),
(2, '624615547', 24, 24),
(2, '687381982', 10, 19),
(2, '724144589', 28, 0),
(2, '777375977', 32, 46),
(2, '795120598', 32, 42),
(2, '885181140', 2, 27),
(2, '927263424', 26, 2),
(2, '936204092', 0, 15),
(2, '953679781', 4, 36),
(2, '983834414', 25, 33),
(2, '999980890', 39, 42),
(6, '008392650', 17, 15),
(6, '037639676', 12, 40),
(6, '056231385', 8, 29),
(6, '157926444', 45, 48),
(6, '158283846', 15, 15),
(6, '178191875', 22, 34),
(6, '209905415', 5, 48),
(6, '280500368', 23, 16),
(6, '291274969', 3, 38),
(6, '396539472', 12, 26),
(6, '416156097', 42, 39),
(6, '430301187', 32, 24),
(6, '456073283', 42, 33),
(6, '505107726', 21, 34),
(6, '572971346', 9, 8),
(6, '609446507', 37, 8),
(6, '709916670', 6, 39),
(6, '835135470', 29, 7),
(6, '896531472', 39, 11),
(6, '905524391', 33, 6),
(6, '909338593', 49, 33),
(6, '936204092', 9, 48),
(6, '946876533', 17, 32),
(6, '953679781', 26, 39),
(7, '037639676', 26, 7),
(7, '486459501', 22, 15),
(7, '687381982', 10, 24),
(7, '722345523', 0, 28),
(7, '783460026', 39, 41),
(8, '098764800', 21, 48),
(8, '189831806', 22, 11),
(8, '584616019', 17, 4),
(8, '702632046', 36, 39),
(8, '857669280', 18, 40),
(8, '916062683', 33, 43),
(12, '055493685', 23, 26),
(12, '158283846', 23, 27),
(12, '234594998', 31, 9),
(12, '261424165', 40, 0),
(12, '267197813', 47, 25),
(12, '486267334', 32, 7),
(12, '609446507', 41, 27),
(12, '722345523', 48, 36),
(12, '779135891', 12, 27),
(12, '897949103', 37, 28),
(12, '976797521', 14, 1),
(15, '031118566', 29, 26),
(15, '061299599', 49, 1),
(15, '071234814', 5, 49),
(15, '084771590', 11, 20),
(15, '134889514', 4, 27),
(15, '139375749', 16, 18),
(15, '178191875', 25, 38),
(15, '193066153', 37, 33),
(15, '209669373', 44, 5),
(15, '298479518', 22, 27),
(15, '376561556', 21, 28),
(15, '396539472', 12, 7),
(15, '547878485', 5, 27),
(15, '577556219', 39, 33),
(15, '592102591', 46, 49),
(15, '691272540', 9, 13),
(15, '856116961', 37, 1),
(15, '896531472', 12, 45),
(15, '916062683', 10, 35),
(15, '964622134', 24, 40),
(15, '988989417', 47, 10),
(15, '999980890', 3, 29),
(16, '005666342', 20, 2),
(16, '008392650', 4, 6),
(16, '036904572', 41, 8),
(16, '189831806', 28, 2),
(16, '231882891', 0, 38),
(16, '238903937', 27, 21),
(16, '248101425', 8, 31),
(16, '267197813', 8, 0),
(16, '280198860', 31, 29),
(16, '280500368', 10, 2),
(16, '287157769', 38, 29),
(16, '298479518', 14, 27),
(16, '406270368', 31, 9),
(16, '478349069', 18, 35),
(16, '486267334', 18, 25),
(16, '680640505', 23, 5),
(16, '687381982', 49, 0),
(16, '691272540', 41, 26),
(16, '737214189', 15, 47),
(16, '779846644', 35, 10),
(16, '801818241', 20, 1),
(16, '856116961', 16, 49),
(16, '905524391', 14, 18),
(16, '909338593', 9, 38),
(16, '999980890', 48, 36),
(17, '055134808', 30, 4),
(17, '055493685', 46, 3),
(17, '119217710', 37, 4),
(17, '134889514', 47, 7),
(17, '158283846', 24, 11),
(17, '178191875', 12, 43),
(17, '209669373', 10, 30),
(17, '248487285', 33, 17),
(17, '298479518', 36, 35),
(17, '431199250', 26, 18),
(17, '524035300', 0, 26),
(17, '691272540', 16, 3),
(17, '720640810', 38, 1),
(17, '724144589', 27, 34),
(17, '728508341', 0, 25),
(17, '849866024', 20, 1),
(17, '885181140', 21, 17),
(19, '107525059', 37, 48),
(19, '291274969', 47, 9),
(19, '456073283', 37, 20),
(19, '724144589', 23, 15),
(20, '005499124', 43, 36),
(20, '031118566', 25, 37),
(20, '036904572', 39, 7),
(20, '208925700', 30, 31),
(20, '238903937', 27, 22),
(20, '252905289', 40, 39),
(20, '430301187', 23, 35),
(20, '456073283', 24, 19),
(20, '739707132', 20, 45),
(20, '828927742', 6, 16),
(20, '991628649', 23, 35),
(22, '008392650', 44, 1),
(22, '037639676', 41, 47),
(22, '055134808', 7, 19),
(22, '055493685', 36, 33),
(22, '066790483', 36, 47),
(22, '084701003', 26, 21),
(22, '098764800', 24, 10),
(22, '134889514', 6, 47),
(22, '157926444', 9, 33),
(22, '178191875', 23, 49),
(22, '234594998', 19, 10),
(22, '238903937', 1, 47),
(22, '261424165', 38, 7),
(22, '280198860', 4, 20),
(22, '380985208', 23, 29),
(22, '457169995', 5, 0),
(22, '505107726', 8, 33),
(22, '587993087', 15, 44),
(22, '605369373', 24, 41),
(22, '611383602', 34, 3),
(22, '624615547', 45, 10),
(22, '642819006', 32, 12),
(22, '674568436', 30, 39),
(22, '691272540', 9, 34),
(22, '779846644', 13, 27),
(22, '783460026', 26, 38),
(22, '801818241', 23, 23),
(22, '835135470', 2, 38),
(22, '909338593', 4, 3),
(22, '977715212', 1, 35),
(23, '037639676', 32, 26),
(23, '084771590', 48, 4),
(23, '158283846', 19, 44),
(23, '248487285', 43, 35),
(23, '396539472', 43, 39),
(23, '524035300', 1, 44),
(23, '547878485', 44, 25),
(23, '572971346', 37, 41),
(23, '577556219', 29, 36),
(23, '611383602', 34, 3),
(23, '624615547', 49, 10),
(23, '680640505', 26, 15),
(23, '722345523', 18, 5),
(23, '916062683', 38, 33),
(23, '924515166', 34, 44),
(23, '970998188', 14, 13),
(23, '983834414', 19, 36),
(24, '005499124', 19, 22),
(24, '036904572', 20, 26),
(24, '065361062', 0, 19),
(24, '139375749', 14, 47),
(24, '178191875', 26, 17),
(24, '234594998', 32, 31),
(24, '238903937', 35, 29),
(24, '265730275', 1, 41),
(24, '326305135', 43, 35),
(24, '416156097', 15, 20),
(24, '430301187', 35, 11),
(24, '431199250', 9, 38),
(24, '486459501', 30, 33),
(24, '505107726', 20, 24),
(24, '547878485', 25, 31),
(24, '547919357', 38, 25),
(24, '572971346', 4, 32),
(24, '611383602', 1, 19),
(24, '691272540', 45, 26),
(24, '737214189', 15, 11),
(24, '828927742', 13, 31),
(24, '857669280', 30, 49),
(24, '927263424', 45, 18),
(24, '953679781', 10, 9),
(24, '977715212', 2, 16),
(24, '988989417', 45, 38),
(24, '991628649', 25, 45),
(24, '999980890', 8, 49),
(26, '009996609', 43, 32),
(26, '065361062', 4, 18),
(26, '134474971', 16, 36),
(26, '157926444', 3, 18),
(26, '158283846', 13, 38),
(26, '184362631', 30, 28),
(26, '291274969', 32, 6),
(26, '524035300', 5, 49),
(26, '573486699', 17, 17),
(26, '577556219', 28, 25),
(26, '587993087', 43, 2),
(26, '601419281', 13, 9),
(26, '642819006', 22, 33),
(26, '676699560', 0, 47),
(26, '687381982', 26, 17),
(26, '702632046', 37, 46),
(26, '709916670', 26, 22),
(26, '724144589', 41, 39),
(26, '849866024', 48, 4),
(26, '856116961', 0, 24),
(26, '896531472', 32, 3),
(26, '904725006', 26, 49),
(26, '920057796', 11, 41),
(26, '984651727', 17, 36),
(32, '009996609', 49, 36),
(32, '048370423', 12, 24),
(32, '158283846', 30, 40),
(32, '216263427', 4, 47),
(32, '265730275', 13, 21),
(32, '431199250', 23, 2),
(32, '486459501', 45, 36),
(32, '573486699', 34, 11),
(32, '607726716', 9, 29),
(32, '624615547', 7, 1),
(32, '722345523', 10, 37),
(32, '828927742', 19, 47),
(32, '849866024', 28, 8),
(32, '936204092', 27, 29);

--
-- Triggers `carries`
--
DELIMITER $$
CREATE TRIGGER `CarriesDelete` AFTER DELETE ON `carries` FOR EACH ROW DELETE FROM provides WHERE(SELECT COUNT(i.category_id)  FROM item as i, carries as c WHERE  provides.category_id = i.category_id && c.barcode = i.Barcode && c.store_id = OLD.store_id ) = 0 && provides.store_id = OLD.store_id
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `carriesUpdate` AFTER INSERT ON `carries` FOR EACH ROW INSERT INTO provides(store_id,category_id) SELECT DISTINCT s.id,i.category_id FROM supermarkets AS s,item AS i, carries AS c  WHERE c.barcode = i.Barcode && c.store_id = s.id &&  NOT EXISTS(SELECT * FROM provides AS a WHERE a.store_id = s.id && a.category_id = i.category_id)
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `category`
--

CREATE TABLE `category` (
  `category_id` int(11) NOT NULL,
  `name` varchar(45) COLLATE utf8mb4_unicode_ci DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `category`
--

INSERT INTO `category` (`category_id`, `name`) VALUES
(0, 'Fresh produce'),
(1, 'Fridge Item'),
(2, 'Liquor'),
(3, 'Self Care'),
(4, 'House Items'),
(5, 'Pets');

-- --------------------------------------------------------

--
-- Table structure for table `contains`
--

CREATE TABLE `contains` (
  `transcaction_id` int(11) NOT NULL,
  `barcode` varchar(45) COLLATE utf8mb4_unicode_ci NOT NULL,
  `amount` int(11) NOT NULL DEFAULT 1
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `contains`
--

INSERT INTO `contains` (`transcaction_id`, `barcode`, `amount`) VALUES
(1, '178191875', 8),
(1, '238903937', 6),
(1, '505107726', 1),
(1, '828927742', 5),
(2, '828927742', 7),
(3, '265730275', 7),
(3, '611383602', 4),
(3, '988989417', 1),
(4, '005499124', 4),
(4, '208925700', 5),
(5, '722345523', 1),
(6, '134889514', 2),
(6, '691272540', 8),
(7, '234594998', 7),
(7, '280198860', 6),
(7, '605369373', 6),
(7, '801818241', 9),
(7, '977715212', 8),
(8, '009996609', 10),
(8, '157926444', 7),
(8, '676699560', 5),
(8, '724144589', 10),
(9, '158283846', 6),
(9, '849866024', 2),
(9, '904725006', 9),
(10, '189831806', 2),
(10, '248101425', 3),
(10, '280500368', 9),
(10, '486267334', 8),
(10, '687381982', 9),
(10, '905524391', 10),
(10, '999980890', 3),
(11, '611383602', 5),
(11, '722345523', 2),
(11, '970998188', 10),
(11, '983834414', 3),
(12, '739707132', 9),
(13, '009996609', 9),
(13, '158283846', 3),
(14, '084771590', 7),
(14, '134889514', 4),
(14, '193066153', 10),
(14, '547878485', 6),
(14, '577556219', 7),
(14, '896531472', 6),
(15, '055493685', 8),
(15, '084701003', 1),
(15, '134889514', 2),
(15, '909338593', 10),
(16, '702632046', 10),
(16, '896531472', 6),
(17, '107525059', 2),
(17, '291274969', 3),
(17, '456073283', 1),
(17, '724144589', 3),
(18, '298479518', 9),
(18, '720640810', 1),
(18, '728508341', 5),
(18, '849866024', 10),
(18, '885181140', 1),
(19, '234594998', 10),
(19, '609446507', 2),
(19, '722345523', 10),
(19, '779135891', 8),
(19, '976797521', 8),
(20, '916062683', 9),
(21, '036904572', 6),
(21, '326305135', 1),
(21, '430301187', 10),
(21, '547919357', 1),
(21, '691272540', 4),
(21, '991628649', 8),
(22, '031118566', 7),
(22, '456073283', 7),
(22, '828927742', 10),
(22, '991628649', 10),
(23, '036904572', 6),
(23, '298479518', 4),
(23, '801818241', 7),
(24, '184362631', 2),
(24, '524035300', 9),
(24, '920057796', 7),
(24, '984651727', 5),
(25, '098764800', 3),
(25, '189831806', 9),
(25, '584616019', 9),
(25, '702632046', 5),
(25, '916062683', 9),
(26, '486459501', 1),
(26, '547878485', 2),
(26, '737214189', 3),
(27, '158283846', 5),
(27, '178191875', 3),
(27, '431199250', 8),
(27, '524035300', 9),
(28, '055134808', 8),
(28, '261424165', 3),
(28, '642819006', 4),
(29, '157926444', 6),
(29, '457169995', 5),
(30, '857669280', 1),
(31, '037639676', 4),
(31, '158283846', 10),
(31, '469226948', 6),
(31, '936204092', 3),
(32, '231882891', 9),
(33, '924515166', 9),
(34, '233875714', 1),
(34, '248101425', 3),
(34, '456073283', 7),
(34, '547919357', 3),
(34, '601419281', 1),
(35, '037639676', 10),
(35, '178191875', 4),
(35, '238903937', 5),
(35, '611383602', 10),
(35, '674568436', 4),
(35, '691272540', 2),
(35, '779846644', 6),
(36, '048370423', 5),
(36, '216263427', 10),
(36, '265730275', 6),
(36, '607726716', 8),
(37, '139375749', 2),
(37, '857669280', 9),
(37, '927263424', 1),
(37, '953679781', 10),
(38, '376561556', 7),
(38, '547878485', 8),
(38, '691272540', 1),
(38, '856116961', 3),
(38, '916062683', 4),
(38, '964622134', 8),
(39, '157926444', 8),
(39, '209905415', 8),
(39, '572971346', 1),
(40, '061299599', 2),
(40, '139375749', 5),
(40, '178191875', 9),
(40, '209669373', 10),
(40, '396539472', 4),
(41, '134474971', 8),
(41, '291274969', 5),
(41, '573486699', 10),
(41, '577556219', 8),
(41, '587993087', 4),
(42, '056231385', 9),
(42, '158283846', 7),
(42, '267197813', 3),
(42, '431199250', 2),
(42, '545322544', 1),
(43, '008392650', 1),
(43, '098764800', 1),
(43, '783460026', 2),
(44, '055493685', 7),
(44, '261424165', 2),
(45, '248487285', 6),
(45, '724144589', 9),
(46, '252905289', 3),
(47, '601419281', 10),
(47, '856116961', 2),
(48, '055493685', 3),
(48, '169165199', 9),
(48, '189831806', 9),
(48, '234594998', 4),
(48, '396539472', 6),
(48, '724144589', 2),
(48, '795120598', 10),
(49, '573486699', 4),
(49, '849866024', 6),
(50, '037639676', 2),
(50, '524035300', 9),
(50, '577556219', 8),
(50, '624615547', 4),
(50, '680640505', 9),
(51, '267197813', 2),
(51, '486267334', 6),
(51, '897949103', 3),
(52, '005499124', 4),
(52, '065361062', 5),
(52, '326305135', 5),
(52, '416156097', 6),
(52, '977715212', 7),
(53, '036904572', 9),
(53, '238903937', 9),
(53, '430301187', 3),
(54, '478349069', 7),
(54, '737214189', 6),
(55, '158283846', 10),
(55, '396539472', 9),
(55, '547878485', 10),
(55, '572971346', 1),
(56, '084701003', 9),
(56, '134474971', 4),
(56, '283528929', 4),
(56, '376561556', 5),
(56, '587993087', 5),
(56, '624615547', 9),
(57, '505107726', 1),
(57, '587993087', 4),
(57, '624615547', 10),
(57, '835135470', 10),
(58, '031118566', 3),
(58, '298479518', 1),
(58, '964622134', 3),
(58, '999980890', 3),
(59, '037639676', 8),
(60, '248101425', 4),
(60, '909338593', 2),
(61, '267197813', 5),
(61, '779846644', 3),
(62, '008392650', 5),
(62, '280198860', 10),
(62, '856116961', 5),
(63, '055134808', 10),
(63, '055493685', 8),
(63, '119217710', 3),
(63, '209669373', 4),
(64, '005666342', 4),
(64, '287157769', 9),
(64, '680640505', 1),
(65, '178191875', 6),
(65, '953679781', 8),
(65, '999980890', 4),
(66, '158283846', 4),
(67, '609446507', 5),
(67, '777375977', 2),
(67, '983834414', 10),
(68, '008392650', 10),
(68, '056231385', 1),
(68, '291274969', 8),
(68, '505107726', 10),
(68, '609446507', 6),
(68, '835135470', 4),
(68, '909338593', 3),
(68, '946876533', 3),
(69, '055134808', 9),
(69, '066790483', 6),
(69, '280198860', 2),
(69, '380985208', 8),
(70, '178191875', 2),
(70, '430301187', 7),
(70, '456073283', 7),
(70, '905524391', 5),
(70, '946876533', 7),
(70, '953679781', 8),
(71, '065361062', 3),
(71, '577556219', 8),
(71, '642819006', 3),
(71, '687381982', 7),
(71, '709916670', 1),
(72, '037639676', 9),
(72, '158283846', 2),
(72, '396539472', 9),
(72, '430301187', 4),
(72, '709916670', 9),
(72, '896531472', 4),
(72, '936204092', 3),
(73, '486459501', 10),
(73, '687381982', 10),
(73, '722345523', 4),
(73, '783460026', 10),
(74, '280500368', 10),
(74, '416156097', 3),
(74, '936204092', 6),
(75, '031118566', 8),
(75, '687381982', 10),
(75, '885181140', 6),
(75, '927263424', 8),
(76, '036904572', 9),
(76, '234594998', 10),
(76, '431199250', 10),
(76, '572971346', 10),
(76, '857669280', 3),
(76, '999980890', 7),
(77, '005666342', 10),
(77, '238903937', 5),
(77, '406270368', 6),
(77, '691272540', 3),
(78, '084771590', 2),
(78, '248487285', 4),
(78, '722345523', 5),
(78, '916062683', 6),
(79, '431199250', 5),
(79, '486459501', 2),
(79, '624615547', 1),
(79, '936204092', 9),
(80, '071234814', 9),
(80, '134889514', 7),
(80, '592102591', 5),
(80, '988989417', 1);

--
-- Triggers `contains`
--
DELIMITER $$
CREATE TRIGGER `AddItemToTranscaction` AFTER INSERT ON `contains` FOR EACH ROW UPDATE transcaction SET total_price = total_price + (SELECT item.current_price*NEW.amount FROM item AS item WHERE item.Barcode =  NEW.barcode LIMIT 1) WHERE transcaction.id = NEW.transcaction_id
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `RemoveItemTranscation` AFTER DELETE ON `contains` FOR EACH ROW UPDATE transcaction SET total_price = total_price - (SELECT item.current_price*OLD.amount FROM item AS item WHERE item.Barcode = OLD.barcode LIMIT 1) WHERE id = OLD.transcaction_id
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `customer`
--

CREATE TABLE `customer` (
  `card_id` int(11) NOT NULL,
  `points` int(11) DEFAULT 0,
  `first_name` varchar(45) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `last_name` varchar(45) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `street_name` varchar(45) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `street_number` smallint(6) DEFAULT NULL,
  `city` varchar(45) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `state` varchar(45) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `zipcode` int(11) DEFAULT NULL,
  `birth_date` date DEFAULT '0000-00-00',
  `married` tinyint(4) DEFAULT 0,
  `children` tinyint(4) DEFAULT 0,
  `pets` tinyint(4) DEFAULT 0
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `customer`
--

INSERT INTO `customer` (`card_id`, `points`, `first_name`, `last_name`, `street_name`, `street_number`, `city`, `state`, `zipcode`, `birth_date`, `married`, `children`, `pets`) VALUES
(0, 9142, 'Rodger', 'Mueller', 'et', 634, 'New Kaneshire', 'NewYork', 66624, '1994-10-26', 1, 13, 1),
(1, 83780, 'Zack', 'Ratke', 'natus', 7664, 'North Syble', 'Louisiana', 86892, '1978-06-13', 1, 13, 0),
(2, 56971, 'Rubie', 'Murazik', 'atque', 50, 'East Merritt', 'Virginia', 83008, '2006-01-01', 0, 9, 0),
(3, 298, 'Kaleb', 'Kutch', 'nihil', 32767, 'Trantowshire', 'Maine', 47217, '1972-03-26', 1, 19, 0),
(4, 62181, 'Annabel', 'Cummerata', 'explicabo', 32767, 'Davisshire', 'District of Columbia', 3102, '2001-10-07', 1, 8, 1),
(5, 20979, 'Francesco', 'Stracke', 'occaecati', 0, 'Lylafurt', 'NorthDakota', 48951, '2011-12-12', 1, 14, 0),
(6, 85195, 'Margie', 'Olson', 'sed', 6261, 'North Wendellshire', 'Mississippi', 36394, '1999-11-21', 0, 0, 1),
(7, 59668, 'Miles', 'Volkman', 'laudantium', 7207, 'North Scottiefurt', 'Illinois', 24648, '1999-02-14', 0, 18, 1),
(8, 17916, 'Roma', 'Beatty', 'dolorem', 32767, 'Derricktown', 'Arkansas', 32100, '2018-02-16', 0, 16, 1),
(9, 10558, 'Jessyca', 'Williamson', 'harum', 6, 'North Heberport', 'Kentucky', 18965, '1996-06-16', 0, 8, 1),
(10, 57947, 'Alexys', 'Wiegand', 'itaque', 27, 'South Freida', 'Indiana', 82193, '2009-03-01', 1, 6, 1),
(11, 82273, 'Cara', 'Haley', 'perferendis', 32767, 'Colechester', 'Delaware', 21808, '1979-01-01', 1, 16, 1),
(12, 11172, 'Yasmin', 'Gibson', 'quae', 0, 'Douglasburgh', 'California', 24773, '2003-02-25', 1, 16, 0),
(13, 51589, 'Sasha', 'Medhurst', 'dolores', 3347, 'Ziemeview', 'Maryland', 13818, '1994-05-16', 0, 3, 0),
(14, 38758, 'Marjorie', 'Sipes', 'ut', 3340, 'North Laron', 'Nebraska', 59749, '1988-10-26', 0, 14, 0),
(15, 30669, 'Marley', 'Zemlak', 'qui', 32767, 'Lake Davestad', 'Oklahoma', 20559, '1977-07-27', 0, 3, 0),
(16, 54407, 'Brandon', 'Wyman', 'voluptas', 32767, 'Noemyhaven', 'Montana', 90029, '2002-02-07', 0, 3, 1),
(17, 85662, 'Daphne', 'Bergstrom', 'nemo', 0, 'Garrymouth', 'Oklahoma', 98510, '2013-05-29', 0, 0, 0),
(18, 57558, 'Guy', 'Kertzmann', 'ullam', 0, 'North Humberto', 'Montana', 4478, '1980-02-19', 1, 5, 0),
(19, 72806, 'Gage', 'Halvorson', 'rerum', 8, 'O\'Connellville', 'Indiana', 11287, '2018-08-17', 1, 9, 0),
(20, 36068, 'Anabelle', 'King', 'et', 32767, 'New Peytonton', 'Indiana', 62247, '2013-04-24', 0, 6, 1),
(21, 43943, 'Arlo', 'Barton', 'non', 32767, 'Gleasonhaven', 'Alabama', 96316, '2011-03-29', 1, 20, 0),
(22, 5149, 'Sedrick', 'Boyer', 'voluptate', 23, 'South Maximillianborough', 'Texas', 27495, '1976-10-28', 0, 4, 0),
(23, 11014, 'Kiarra', 'Ledner', 'itaque', 214, 'Muellershire', 'Washington', 65273, '1970-07-12', 0, 15, 0),
(24, 479, 'Merle', 'Powlowski', 'mollitia', 5392, 'Lake Ginochester', 'Colorado', 80676, '1997-12-14', 1, 1, 1),
(25, 79492, 'Deondre', 'Thompson', 'explicabo', 32767, 'Bergstrommouth', 'Wyoming', 1266, '2010-11-30', 0, 20, 1),
(26, 14834, 'Liza', 'Anderson', 'minima', 32767, 'East Alexandra', 'Montana', 96821, '1974-10-09', 0, 3, 1),
(27, 11625, 'Sienna', 'Shields', 'sint', 6, 'North Belle', 'Arizona', 67967, '2014-09-18', 1, 5, 1),
(28, 55020, 'Dale', 'Wilderman', 'repellendus', 2947, 'Goyetteport', 'Idaho', 80024, '1972-10-15', 1, 0, 0),
(29, 43657, 'Troy', 'Dicki', 'neque', 2, 'Jadenport', 'Arkansas', 89418, '2003-09-23', 1, 20, 1),
(30, 88472, 'Selina', 'Heller', 'sit', 32767, 'West Santina', 'Hawaii', 17304, '1976-12-15', 0, 12, 0),
(31, 92127, 'Noemy', 'Bosco', 'ut', 5377, 'South Earlinetown', 'Kentucky', 14499, '2012-04-08', 1, 4, 1),
(32, 93852, 'German', 'Schultz', 'ducimus', 2, 'East Simeon', 'Nevada', 33052, '2000-10-14', 1, 7, 1),
(33, 76768, 'Bettie', 'Harber', 'non', 0, 'Paucekmouth', 'Virginia', 49177, '1984-01-14', 1, 7, 1),
(34, 87271, 'Dax', 'O\'Conner', 'ipsa', 25990, 'Vladimirberg', 'Missouri', 71080, '2015-09-13', 0, 13, 1),
(35, 27859, 'Donna', 'Lind', 'sapiente', 38, 'New Rainaberg', 'Missouri', 54287, '1996-07-04', 0, 1, 0),
(36, 82452, 'Audreanne', 'Huels', 'consequuntur', 64, 'New Hollyborough', 'NewJersey', 62107, '2005-04-26', 1, 8, 0),
(37, 90161, 'Doris', 'Veum', 'nam', 32767, 'New Alanis', 'Utah', 7037, '1988-04-28', 1, 7, 0),
(38, 48225, 'Shirley', 'Romaguera', 'consequatur', 0, 'Steubershire', 'Mississippi', 61011, '2019-06-13', 0, 5, 0),
(39, 40992, 'Dejah', 'Torphy', 'atque', 32767, 'Howellshire', 'Indiana', 42048, '2009-08-26', 1, 3, 0),
(40, 30493, 'Jared', 'Smith', 'et', 36, 'Bayerberg', 'Iowa', 64826, '1974-02-01', 1, 18, 0);

-- --------------------------------------------------------

--
-- Table structure for table `item`
--

CREATE TABLE `item` (
  `name` varchar(45) COLLATE utf8mb4_unicode_ci NOT NULL,
  `Barcode` varchar(45) COLLATE utf8mb4_unicode_ci NOT NULL,
  `category_id` int(11) DEFAULT NULL,
  `signature_item` tinyint(4) DEFAULT 0,
  `current_price` float DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `item`
--

INSERT INTO `item` (`name`, `Barcode`, `category_id`, `signature_item`, `current_price`) VALUES
('3c630ae5', '002652773', 3, 0, 87.65),
('4c5ba88b', '005499124', 2, 0, 61.61),
('53c823ba', '005666342', 4, 1, 2.21),
('096ac5f3', '006400954', 3, 0, 31.71),
('22c355a8', '008392650', 5, 0, 97.83),
('1de33ff9', '009996609', 0, 1, 5.32),
('656309ac', '031118566', 3, 0, 35.85),
('9c009e0b', '036904572', 2, 0, 63.21),
('d8c99a69', '037639676', 1, 1, 99.58),
('b593e77a', '048370423', 0, 1, 23.5),
('68875a39', '055134808', 1, 1, 36.14),
('bda40651', '055493685', 0, 1, 86.87),
('6f8550de', '056231385', 3, 1, 65.33),
('bf6dc9d3', '061299599', 3, 0, 26.02),
('4b40b6c0', '065361062', 2, 1, 62.13),
('8040328e', '066790483', 5, 1, 58.64),
('94a032f9', '071234814', 5, 0, 16.17),
('976327d7', '084701003', 4, 0, 17.26),
('3ee6668b', '084771590', 1, 1, 72.75),
('ceda6317', '098764800', 2, 0, 37.42),
('1be6a82c', '107525059', 5, 0, 12.66),
('d9bf83a3', '119217710', 0, 0, 72.5),
('ee962f48', '134474971', 5, 1, 42.76),
('b54df792', '134889514', 4, 0, 5.94),
('77699985', '139375749', 4, 0, 49.11),
('53a301e9', '157926444', 3, 1, 8.28),
('3fdc5e17', '158283846', 4, 0, 71.57),
('9bbc811d', '164296593', 2, 0, 16.57),
('9066c232', '169165199', 3, 1, 70.08),
('f78fa17b', '178191875', 2, 0, 33.06),
('ba5a41fc', '184362631', 5, 0, 55.79),
('3c2cb0aa', '189831806', 1, 1, 0.05),
('28f6de70', '193066153', 0, 0, 15.13),
('7e139c66', '201029065', 2, 0, 78.67),
('9e9dc24f', '201213256', 3, 0, 79.22),
('a6ffe692', '204463191', 5, 0, 73.1),
('ffacf5c5', '208925700', 4, 0, 70.07),
('70659de9', '209669373', 5, 0, 49.94),
('5a945f88', '209905415', 2, 1, 93.28),
('3bcb306b', '216263427', 1, 0, 89.68),
('ffceed02', '225584755', 1, 0, 71.62),
('b7473c2a', '231882891', 5, 0, 73.56),
('311bb361', '233875714', 1, 0, 94.86),
('7ca83c9f', '234594998', 0, 1, 61.61),
('111d1af7', '238903937', 0, 0, 38.92),
('d77a83d4', '241611596', 0, 0, 68.04),
('aeeca732', '248101425', 2, 1, 62.74),
('27015ed4', '248487285', 1, 1, 63.27),
('db1c033f', '249377237', 1, 1, 26.92),
('2cea0b03', '252905289', 4, 0, 94.97),
('4dac007f', '261424165', 5, 0, 74.54),
('17303ab2', '265730275', 2, 0, 46.06),
('4781a651', '267197813', 5, 1, 28.69),
('9ed3756b', '280198860', 1, 0, 92.95),
('0e4beb67', '280500368', 0, 0, 99.87),
('fd932feb', '283528929', 1, 1, 5.7),
('7a706295', '283609503', 5, 0, 1.12),
('1db9fd4b', '287157769', 1, 0, 25.99),
('85048a98', '291274969', 0, 0, 65.96),
('f91982c6', '298479518', 2, 0, 66.54),
('2f406c3f', '302879993', 1, 0, 35.81),
('af2e2fdf', '326305135', 0, 0, 19.91),
('5d0ba160', '330085030', 0, 0, 48.01),
('d5c3dfe8', '376561556', 1, 0, 56.59),
('fd003c5e', '380985208', 1, 0, 65.61),
('a5cd80c4', '396539472', 0, 0, 91.75),
('47b75e22', '406270368', 2, 0, 78.64),
('3da5a0b1', '416156097', 4, 1, 12.97),
('d013fd4c', '418223108', 3, 0, 46.02),
('8fd8c7a9', '430301187', 0, 0, 29.34),
('20ef8d12', '431199250', 1, 0, 25.06),
('877db9bf', '456073283', 0, 1, 58.84),
('0b86e5e7', '457169995', 1, 0, 68.71),
('f731152f', '458822391', 5, 1, 82.56),
('0e9a6ef0', '469226948', 1, 1, 14.98),
('e6eede84', '478349069', 5, 0, 99.32),
('18f18590', '486267334', 4, 0, 44.2),
('15a723b7', '486459501', 3, 0, 37.42),
('be876b68', '504940651', 0, 0, 99.78),
('2f5a8317', '505107726', 3, 0, 97.54),
('01a61abf', '520665628', 0, 1, 27.89),
('4cd0fb30', '524035300', 2, 0, 40.62),
('8178c062', '545322544', 1, 0, 39.03),
('f41b1bb1', '547878485', 4, 1, 52.33),
('a6fd7a6d', '547919357', 0, 0, 95.44),
('ff2283dd', '572971346', 5, 1, 95.41),
('90067645', '573486699', 4, 0, 27.58),
('b001cd85', '575755309', 2, 1, 96.99),
('9bb37c6c', '577556219', 2, 0, 76.48),
('c390fb26', '584616019', 5, 1, 14.86),
('58c41c92', '587993087', 3, 0, 94.19),
('6b34527e', '592102591', 5, 0, 32.78),
('3ba3e07c', '601419281', 0, 0, 22.26),
('7f84a88a', '605369373', 2, 0, 26.7),
('b5a7238a', '607726716', 0, 0, 85.95),
('bf9819d4', '609446507', 0, 0, 28.85),
('31773d86', '611383602', 5, 1, 17.41),
('4fe5cca2', '624615547', 0, 0, 34.5),
('92e82abd', '642819006', 2, 1, 58.41),
('f8b3b932', '647157984', 5, 1, 11.93),
('ecc15885', '674568436', 0, 0, 81.07),
('efb10cdc', '676699560', 5, 0, 87.28),
('a195607e', '680640505', 1, 1, 75.55),
('824130da', '687381982', 2, 0, 11.19),
('e79f96f4', '691272540', 5, 0, 60.44),
('3872e58b', '702632046', 5, 0, 1.73),
('9d40e628', '709916670', 2, 1, 18.91),
('c3f694c7', '717651307', 2, 0, 49.38),
('29ca8e12', '720640810', 2, 0, 91.06),
('2087f50a', '722345523', 5, 0, 97.68),
('8871d9a2', '724144589', 0, 0, 55.53),
('6384f1bf', '728508341', 2, 0, 2.01),
('e589616d', '730544483', 3, 0, 40.55),
('cad2c9fc', '737214189', 1, 0, 86.73),
('2b4cc87e', '739707132', 0, 0, 4),
('97043e61', '740577074', 2, 1, 13.95),
('5df046bf', '777375977', 1, 0, 72.86),
('2cc863ac', '779135891', 1, 0, 84.09),
('54d6cb85', '779846644', 0, 0, 67.62),
('27cc8e23', '783460026', 5, 0, 34.49),
('bf923f1d', '795120598', 3, 0, 69.53),
('63b12080', '799580586', 0, 0, 82.1),
('e4971161', '801818241', 3, 1, 9.54),
('fc249172', '828927742', 5, 0, 71.55),
('cd6939f7', '835135470', 5, 1, 60.58),
('bd69922e', '849866024', 0, 0, 81.57),
('3f8d7b04', '856116961', 2, 0, 83.12),
('89463cda', '857669280', 1, 0, 46.91),
('d24b5b13', '885181140', 1, 0, 47.83),
('4fec80f3', '896531472', 2, 0, 92.01),
('0d80491f', '897949103', 1, 0, 50.25),
('d55d811c', '904725006', 4, 0, 81.59),
('d577a47f', '905524391', 4, 0, 16.41),
('1b420bd6', '909338593', 0, 1, 74.27),
('0856aa98', '916062683', 2, 1, 77.15),
('91c9d79a', '920057796', 0, 0, 92.34),
('fc63c93a', '924515166', 1, 1, 34.43),
('c644cb50', '927263424', 3, 0, 68.84),
('94f17ba4', '936204092', 2, 0, 0.3),
('0da7f372', '946876533', 5, 1, 46.98),
('ebf231a0', '953679781', 3, 1, 98.6),
('4037956e', '964622134', 0, 0, 52.43),
('b6c34b4a', '970998188', 3, 0, 23.25),
('1b8dc4bb', '976797521', 3, 1, 44.26),
('f0682ef1', '977715212', 4, 1, 95.46),
('f22c9f26', '983834414', 5, 1, 44.41),
('27b4f20d', '984651727', 0, 0, 93.89),
('bdb50218', '988989417', 5, 0, 93.28),
('c5471e94', '991628649', 2, 0, 26.02),
('8a2ca2ba', '999980890', 0, 0, 93.67);

--
-- Triggers `item`
--
DELIMITER $$
CREATE TRIGGER `ItemCatChange` AFTER UPDATE ON `item` FOR EACH ROW IF NEW.category_id != OLD.category_id THEN
DELETE FROM provides WHERE (SELECT COUNT(i.category_id) FROM item as i, carries as c WHERE provides.category_id = category_id && c.barcode = i.Barcode && provides.store_id = c.store_id) = 0;
END IF
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `ItemCatChange2` AFTER UPDATE ON `item` FOR EACH ROW IF NEW.category_id != OLD.category_id THEN
INSERT INTO provides(store_id,category_id) SELECT DISTINCT s.id,NEW.category_id FROM supermarkets AS s, carries AS c WHERE c.barcode = NEW.Barcode && c.store_id = s.id && NOT EXISTS(SELECT * FROM provides AS a WHERE a.store_id = s.id && a.category_id = NEW.category_id);
END IF
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `ItemPriceUpdate` BEFORE UPDATE ON `item` FOR EACH ROW IF NEW.current_price != OLD.current_price && NEW.current_price >= 0 THEN
INSERT INTO price_change(date,barcode,old_price,new_price) VALUES (CURRENT_TIMESTAMP,NEW.Barcode,OLD.current_price,NEW.current_price);
ELSEIF NEW.current_price < 0 THEN
SET NEW.current_price = 0;
IF OLD.current_price != 0 THEN
INSERT INTO price_change(date,barcode,old_price,new_price) VALUES (CURRENT_TIMESTAMP,NEW.Barcode,OLD.current_price,0);
END IF;
END IF
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `price_change`
--

CREATE TABLE `price_change` (
  `date` datetime NOT NULL,
  `barcode` varchar(45) COLLATE utf8mb4_unicode_ci NOT NULL,
  `old_price` float DEFAULT NULL,
  `new_price` float DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `price_change`
--

INSERT INTO `price_change` (`date`, `barcode`, `old_price`, `new_price`) VALUES
('1990-01-13 10:13:07', '005499124', 0, 96.54),
('1990-03-03 19:16:51', '178191875', 0, 21.12),
('1990-05-06 20:10:12', '469226948', 0, 54.71),
('1990-06-09 10:29:25', '584616019', 0, 81.79),
('1990-07-10 19:42:45', '036904572', 0, 30.21),
('1991-01-18 12:05:03', '976797521', 0, 9.91),
('1991-07-17 16:30:10', '231882891', 0, 87.55),
('1991-09-25 10:33:51', '577556219', 0, 11.3),
('1991-11-12 18:05:18', '241611596', 0, 67.95),
('1991-12-26 10:35:31', '779846644', 0, 70.21),
('1992-01-31 09:28:40', '988989417', 0, 42.26),
('1992-01-31 16:07:54', '009996609', 0, 14.2),
('1992-06-30 09:56:42', '055493685', 0, 13.62),
('1992-08-13 14:54:56', '430301187', 0, 67.95),
('1992-09-30 11:31:40', '575755309', 0, 36.75),
('1992-12-06 16:26:09', '098764800', 0, 70.39),
('1993-01-05 11:44:38', '418223108', 0, 63.19),
('1993-03-22 09:42:24', '717651307', 0, 77.01),
('1993-04-22 14:36:38', '702632046', 0, 7.74),
('1993-06-14 13:05:57', '330085030', 0, 17.8),
('1994-03-06 16:47:01', '169165199', 0, 78.6),
('1994-05-21 16:04:15', '287157769', 0, 25.09),
('1994-05-26 20:31:57', '999980890', 0, 73.89),
('1994-06-28 12:06:49', '737214189', 0, 1.62),
('1994-07-01 13:11:19', '486459501', 0, 25.47),
('1994-07-23 13:36:16', '920057796', 0, 2.84),
('1994-09-06 15:48:25', '201213256', 0, 45.21),
('1994-09-07 09:52:49', '740577074', 0, 13.58),
('1994-09-21 15:10:52', '545322544', 0, 23.14),
('1994-12-07 20:06:46', '897949103', 0, 27),
('1995-06-13 19:13:05', '261424165', 0, 62.55),
('1995-11-05 12:07:02', '066790483', 0, 99.08),
('1995-11-12 10:27:53', '592102591', 0, 71.36),
('1995-12-06 14:15:19', '828927742', 0, 43.4),
('1996-01-11 18:43:05', '795120598', 0, 38.69),
('1996-01-22 09:00:57', '674568436', 0, 40.02),
('1997-01-02 15:16:01', '380985208', 0, 85.58),
('1997-02-23 12:27:10', '376561556', 0, 84.84),
('1997-03-31 12:50:05', '406270368', 0, 3.58),
('1997-04-10 12:24:32', '953679781', 0, 80.96),
('1997-09-27 10:22:45', '801818241', 0, 13.37),
('1997-11-23 19:14:00', '724144589', 0, 26.55),
('1997-12-05 14:10:36', '720640810', 0, 34.67),
('1997-12-09 11:10:35', '008392650', 0, 75.63),
('1998-03-05 13:42:21', '896531472', 0, 15.73),
('1998-05-15 15:46:47', '265730275', 0, 56.97),
('1998-05-24 20:16:38', '909338593', 0, 77.22),
('1998-09-01 09:49:05', '991628649', 0, 96.04),
('1998-11-17 08:04:41', '547919357', 0, 30.86),
('1999-01-23 09:05:30', '002652773', 0, 46.4),
('1999-01-25 09:35:56', '031118566', 0, 52.01),
('1999-02-21 14:52:02', '037639676', 0, 46.4),
('1999-05-11 09:00:03', '134474971', 0, 54.02),
('1999-05-30 08:31:19', '457169995', 0, 55.11),
('1999-06-05 12:53:55', '977715212', 0, 63.03),
('1999-06-24 11:03:32', '524035300', 0, 15.97),
('1999-08-07 15:33:09', '904725006', 0, 35.92),
('1999-08-17 09:18:49', '478349069', 0, 73.42),
('1999-09-24 12:17:54', '601419281', 0, 93.18),
('2000-02-18 12:35:05', '055134808', 0, 53.81),
('2000-04-10 08:35:09', '396539472', 0, 48.04),
('2000-04-10 13:18:33', '139375749', 0, 27.46),
('2000-07-12 09:00:04', '248487285', 0, 52.87),
('2000-08-26 08:25:31', '065361062', 0, 4.25),
('2000-12-04 12:44:03', '005666342', 0, 52.81),
('2001-04-21 20:21:48', '193066153', 0, 9.83),
('2001-10-13 18:26:06', '547878485', 0, 80.23),
('2002-07-31 08:41:52', '326305135', 0, 28.82),
('2002-08-09 15:09:53', '184362631', 0, 38.84),
('2002-12-01 17:48:27', '225584755', 0, 91.71),
('2003-03-23 08:44:54', '573486699', 0, 74.26),
('2003-05-12 17:56:37', '856116961', 0, 61.38),
('2003-07-24 15:50:56', '676699560', 0, 48.57),
('2003-11-10 16:05:19', '691272540', 0, 99.16),
('2004-03-05 15:05:04', '071234814', 0, 88.91),
('2004-04-02 12:43:01', '119217710', 0, 59.05),
('2004-06-25 08:20:26', '238903937', 0, 55.14),
('2005-11-08 20:57:31', '298479518', 0, 31.36),
('2006-01-10 12:17:30', '835135470', 0, 44.97),
('2006-02-25 10:49:38', '885181140', 0, 46.79),
('2006-05-02 15:34:35', '486267334', 0, 5.92),
('2006-07-23 12:55:47', '779135891', 0, 10.55),
('2006-12-06 16:40:29', '084771590', 0, 57.84),
('2007-04-17 13:38:37', '777375977', 0, 77.18),
('2007-06-06 16:09:01', '624615547', 0, 53.09),
('2007-08-03 10:55:02', '216263427', 0, 75.71),
('2007-11-29 15:43:46', '291274969', 0, 77.54),
('2008-01-02 14:22:56', '201029065', 0, 73.8),
('2008-01-14 17:26:40', '234594998', 0, 20.17),
('2008-07-09 09:24:03', '458822391', 0, 54.49),
('2008-07-13 12:18:44', '709916670', 0, 26.76),
('2008-08-09 20:19:19', '964622134', 0, 40.77),
('2008-08-29 15:15:23', '520665628', 0, 21.12),
('2008-11-16 08:10:47', '302879993', 0, 51.72),
('2008-12-27 18:22:32', '107525059', 0, 56.69),
('2008-12-30 11:38:30', '456073283', 0, 62.25),
('2009-02-02 10:49:33', '283528929', 0, 51.18),
('2009-02-27 18:57:00', '280500368', 0, 78.06),
('2009-05-21 14:58:20', '267197813', 0, 28.76),
('2009-05-22 17:49:10', '739707132', 0, 29.92),
('2009-06-20 13:26:45', '680640505', 0, 92.48),
('2009-08-21 15:29:15', '084701003', 0, 26.77),
('2009-09-06 13:07:15', '916062683', 0, 72.79),
('2009-11-17 10:03:06', '056231385', 0, 44.98),
('2009-12-08 15:41:17', '061299599', 0, 3.26),
('2009-12-25 17:56:07', '431199250', 0, 71.28),
('2010-02-05 16:19:11', '204463191', 0, 73.99),
('2010-07-16 14:41:10', '587993087', 0, 49.83),
('2010-08-17 18:07:27', '006400954', 0, 43.54),
('2010-11-17 14:03:32', '209669373', 0, 98.69),
('2011-02-25 12:50:15', '783460026', 0, 5.48),
('2012-07-26 14:27:20', '970998188', 0, 37.1),
('2012-08-25 08:05:01', '849866024', 0, 14.36),
('2012-10-11 12:11:56', '233875714', 0, 82.31),
('2013-03-09 11:42:11', '687381982', 0, 69.66),
('2013-09-10 16:17:12', '605369373', 0, 31.8),
('2013-11-02 08:05:58', '730544483', 0, 22.7),
('2013-12-15 13:08:49', '572971346', 0, 27.08),
('2014-02-13 16:23:05', '611383602', 0, 44.66),
('2014-04-29 11:03:21', '134889514', 0, 7.5),
('2014-07-12 08:09:19', '157926444', 0, 64.32),
('2014-08-05 16:29:57', '642819006', 0, 23.32),
('2014-10-23 08:05:47', '283609503', 0, 53.47),
('2015-01-15 20:17:40', '280198860', 0, 64.69),
('2015-05-15 20:03:12', '189831806', 0, 80.88),
('2015-06-06 17:25:44', '946876533', 0, 15.23),
('2015-11-03 09:53:06', '505107726', 0, 71.42),
('2015-12-11 18:39:13', '504940651', 0, 70.48),
('2016-02-06 16:45:18', '728508341', 0, 44.16),
('2016-02-20 18:52:40', '905524391', 0, 60.1),
('2016-04-16 14:33:06', '722345523', 0, 38.81),
('2016-08-23 18:21:04', '158283846', 0, 11.81),
('2016-08-24 12:36:08', '208925700', 0, 33.99),
('2016-08-27 09:56:28', '607726716', 0, 40.02),
('2016-09-11 13:32:45', '209905415', 0, 87.85),
('2016-09-12 16:57:35', '164296593', 0, 7.87),
('2016-12-24 10:39:34', '927263424', 0, 41.93),
('2017-01-06 20:20:29', '647157984', 0, 4.54),
('2017-02-10 13:40:38', '416156097', 0, 29.98),
('2017-03-15 14:42:36', '248101425', 0, 49.62),
('2017-03-28 20:14:35', '799580586', 0, 50.33),
('2017-05-31 18:17:42', '609446507', 0, 97.73),
('2017-07-12 10:56:00', '983834414', 0, 85.55),
('2017-09-15 19:35:40', '984651727', 0, 31.35),
('2018-01-13 16:28:20', '857669280', 0, 85.11),
('2018-01-19 19:10:56', '048370423', 0, 65.39),
('2018-10-06 09:42:24', '252905289', 0, 9.42),
('2019-04-24 11:47:29', '936204092', 0, 69.78),
('2019-06-12 12:03:32', '924515166', 0, 15.34),
('2019-12-10 18:58:03', '249377237', 0, 24.15),
('2020-01-01 08:05:47', '977715212', 63.03, 95.46),
('2020-01-01 12:26:32', '084771590', 57.84, 72.75),
('2020-01-02 19:19:01', '976797521', 9.91, 44.26),
('2020-01-02 19:38:17', '849866024', 14.36, 81.57),
('2020-01-04 11:29:27', '575755309', 36.75, 96.99),
('2020-01-04 19:45:22', '988989417', 42.26, 93.28),
('2020-01-07 11:16:01', '674568436', 40.02, 81.07),
('2020-01-07 20:25:58', '547878485', 80.23, 52.33),
('2020-01-10 17:45:02', '283609503', 53.47, 1.12),
('2020-01-10 19:06:18', '572971346', 27.08, 95.41),
('2020-01-11 10:45:56', '225584755', 91.71, 71.62),
('2020-01-11 15:24:18', '249377237', 24.15, 26.92),
('2020-01-11 18:51:27', '178191875', 21.12, 33.06),
('2020-01-13 12:04:45', '209669373', 98.69, 49.94),
('2020-01-13 19:42:17', '936204092', 69.78, 0.3),
('2020-01-14 16:34:58', '241611596', 67.95, 68.04),
('2020-01-14 18:07:45', '119217710', 59.05, 72.5),
('2020-01-15 10:37:10', '573486699', 74.26, 27.58),
('2020-01-15 14:17:17', '624615547', 53.09, 34.5),
('2020-01-16 08:02:19', '065361062', 4.25, 62.13),
('2020-01-16 20:19:00', '486267334', 5.92, 44.2),
('2020-01-19 11:10:55', '905524391', 60.1, 16.41),
('2020-01-19 18:13:28', '946876533', 15.23, 46.98),
('2020-01-19 20:09:23', '520665628', 21.12, 27.89),
('2020-01-21 09:11:52', '717651307', 77.01, 49.38),
('2020-01-22 12:04:07', '031118566', 52.01, 35.85),
('2020-01-23 11:31:44', '298479518', 31.36, 66.54),
('2020-01-23 13:44:37', '584616019', 81.79, 14.86),
('2020-01-24 11:42:15', '265730275', 56.97, 46.06),
('2020-01-25 11:48:11', '545322544', 23.14, 39.03),
('2020-01-25 17:10:09', '676699560', 48.57, 87.28),
('2020-01-25 17:40:10', '139375749', 27.46, 49.11),
('2020-01-26 13:25:00', '008392650', 75.63, 97.83),
('2020-01-26 17:07:00', '953679781', 80.96, 98.6),
('2020-01-26 20:32:47', '158283846', 11.81, 71.57),
('2020-01-27 09:33:25', '169165199', 78.6, 70.08),
('2020-01-27 11:39:24', '691272540', 99.16, 60.44),
('2020-01-27 15:52:58', '098764800', 70.39, 37.42),
('2020-01-28 12:52:40', '587993087', 49.83, 94.19),
('2020-01-28 14:09:08', '061299599', 3.26, 26.02),
('2020-01-28 14:22:02', '795120598', 38.69, 69.53),
('2020-01-29 15:03:10', '469226948', 54.71, 14.98),
('2020-01-29 15:31:27', '234594998', 20.17, 61.61),
('2020-01-29 19:44:47', '547919357', 30.86, 95.44),
('2020-01-30 18:20:42', '607726716', 40.02, 85.95),
('2020-01-30 19:39:19', '970998188', 37.1, 23.25),
('2020-02-02 11:58:15', '204463191', 73.99, 73.1),
('2020-02-02 14:31:12', '430301187', 67.95, 29.34),
('2020-02-02 16:39:45', '779846644', 70.21, 67.62),
('2020-02-03 14:17:22', '857669280', 85.11, 46.91),
('2020-02-05 08:45:14', '107525059', 56.69, 12.66),
('2020-02-05 14:26:29', '233875714', 82.31, 94.86),
('2020-02-06 13:57:01', '066790483', 99.08, 58.64),
('2020-02-06 14:38:47', '380985208', 85.58, 65.61),
('2020-02-07 13:27:42', '071234814', 88.91, 16.17),
('2020-02-09 13:34:45', '984651727', 31.35, 93.89),
('2020-02-09 16:19:26', '376561556', 84.84, 56.59),
('2020-02-10 12:22:37', '248101425', 49.62, 62.74),
('2020-02-10 14:36:07', '164296593', 7.87, 16.57),
('2020-02-10 17:58:46', '779135891', 10.55, 84.09),
('2020-02-13 13:49:41', '261424165', 62.55, 74.54),
('2020-02-13 18:58:18', '287157769', 25.09, 25.99),
('2020-02-15 10:21:26', '964622134', 40.77, 52.43),
('2020-02-15 19:20:35', '924515166', 15.34, 34.43),
('2020-02-17 09:53:27', '458822391', 54.49, 82.56),
('2020-02-18 08:22:58', '238903937', 55.14, 38.92),
('2020-02-18 12:37:03', '291274969', 77.54, 65.96),
('2020-02-18 17:07:31', '983834414', 85.55, 44.41),
('2020-02-20 13:05:11', '330085030', 17.8, 48.01),
('2020-02-20 18:09:49', '722345523', 38.81, 97.68),
('2020-02-22 08:40:52', '801818241', 13.37, 9.54),
('2020-02-22 10:17:32', '055493685', 13.62, 86.87),
('2020-02-23 17:02:32', '456073283', 62.25, 58.84),
('2020-02-25 09:28:55', '280500368', 78.06, 99.87),
('2020-02-26 08:10:03', '730544483', 22.7, 40.55),
('2020-02-26 18:43:27', '055134808', 53.81, 36.14),
('2020-02-28 08:26:39', '737214189', 1.62, 86.73),
('2020-02-28 20:38:09', '252905289', 9.42, 94.97),
('2020-02-29 11:03:22', '601419281', 93.18, 22.26),
('2020-02-29 13:21:15', '201029065', 73.8, 78.67),
('2020-02-29 15:23:06', '505107726', 71.42, 97.54),
('2020-03-01 11:46:11', '201213256', 45.21, 79.22),
('2020-03-01 17:07:23', '193066153', 9.83, 15.13),
('2020-03-04 11:04:04', '048370423', 65.39, 23.5),
('2020-03-04 17:53:57', '739707132', 29.92, 4),
('2020-03-06 19:54:32', '592102591', 71.36, 32.78),
('2020-03-07 15:58:34', '647157984', 4.54, 11.93),
('2020-03-08 14:10:09', '005666342', 52.81, 2.21),
('2020-03-09 17:22:52', '991628649', 96.04, 26.02),
('2020-03-11 09:18:56', '036904572', 30.21, 63.21),
('2020-03-11 11:19:06', '611383602', 44.66, 17.41),
('2020-03-11 13:44:18', '835135470', 44.97, 60.58),
('2020-03-11 18:57:11', '283528929', 51.18, 5.7),
('2020-03-12 11:50:13', '231882891', 87.55, 73.56),
('2020-03-12 18:21:19', '856116961', 61.38, 83.12),
('2020-03-12 20:40:46', '134889514', 7.5, 5.94),
('2020-03-13 11:41:19', '927263424', 41.93, 68.84),
('2020-03-13 20:23:12', '724144589', 26.55, 55.53),
('2020-03-15 12:10:10', '326305135', 28.82, 19.91),
('2020-03-15 17:08:17', '709916670', 26.76, 18.91),
('2020-03-16 10:14:37', '799580586', 50.33, 82.1),
('2020-03-17 16:34:46', '189831806', 80.88, 0.05),
('2020-03-18 13:21:06', '006400954', 43.54, 31.71),
('2020-03-18 15:33:26', '478349069', 73.42, 99.32),
('2020-03-19 18:01:53', '037639676', 46.4, 99.58),
('2020-03-20 16:32:38', '184362631', 38.84, 55.79),
('2020-03-21 10:25:01', '904725006', 35.92, 81.59),
('2020-03-21 13:22:40', '267197813', 28.76, 28.69),
('2020-03-21 16:52:44', '896531472', 15.73, 92.01),
('2020-03-22 15:31:48', '302879993', 51.72, 35.81),
('2020-03-23 09:02:08', '909338593', 77.22, 74.27),
('2020-03-23 10:36:07', '157926444', 64.32, 8.28),
('2020-03-24 18:13:50', '248487285', 52.87, 63.27),
('2020-03-25 08:16:06', '418223108', 63.19, 46.02),
('2020-03-25 15:31:31', '916062683', 72.79, 77.15),
('2020-03-26 15:11:04', '999980890', 73.89, 93.67),
('2020-03-26 15:35:30', '524035300', 15.97, 40.62),
('2020-03-27 12:28:36', '002652773', 46.4, 87.65),
('2020-03-27 17:46:22', '486459501', 25.47, 37.42),
('2020-03-27 19:44:13', '457169995', 55.11, 68.71),
('2020-03-28 08:06:55', '740577074', 13.58, 13.95),
('2020-03-28 08:24:16', '687381982', 69.66, 11.19),
('2020-03-28 10:02:12', '056231385', 44.98, 65.33),
('2020-03-28 11:07:15', '609446507', 97.73, 28.85),
('2020-03-30 08:16:00', '216263427', 75.71, 89.68),
('2020-03-31 15:38:58', '642819006', 23.32, 58.41),
('2020-03-31 20:00:34', '720640810', 34.67, 91.06),
('2020-04-01 15:52:18', '728508341', 44.16, 2.01),
('2020-04-02 08:55:25', '134474971', 54.02, 42.76),
('2020-04-02 20:11:20', '897949103', 27, 50.25),
('2020-04-04 15:03:18', '396539472', 48.04, 91.75),
('2020-04-06 09:12:46', '828927742', 43.4, 71.55),
('2020-04-08 20:55:40', '431199250', 71.28, 25.06),
('2020-04-11 20:45:03', '009996609', 14.2, 5.32),
('2020-04-12 11:51:06', '885181140', 46.79, 47.83),
('2020-04-15 16:06:40', '280198860', 64.69, 92.95),
('2020-04-15 20:07:53', '702632046', 7.74, 1.73),
('2020-04-16 15:26:09', '605369373', 31.8, 26.7),
('2020-04-20 18:26:26', '084701003', 26.77, 17.26),
('2020-04-21 08:37:22', '920057796', 2.84, 92.34),
('2020-04-21 16:37:12', '209905415', 87.85, 93.28),
('2020-04-23 08:52:09', '777375977', 77.18, 72.86),
('2020-04-23 13:18:49', '680640505', 92.48, 75.55),
('2020-04-24 10:39:06', '406270368', 3.58, 78.64),
('2020-04-24 13:50:39', '208925700', 33.99, 70.07),
('2020-04-25 14:20:57', '504940651', 70.48, 99.78),
('2020-04-26 10:40:02', '416156097', 29.98, 12.97),
('2020-04-26 17:19:50', '005499124', 96.54, 61.61),
('2020-04-28 15:30:49', '783460026', 5.48, 34.49),
('2020-04-28 16:51:39', '577556219', 11.3, 76.48);

-- --------------------------------------------------------

--
-- Table structure for table `provides`
--

CREATE TABLE `provides` (
  `store_id` int(11) NOT NULL,
  `category_id` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `provides`
--

INSERT INTO `provides` (`store_id`, `category_id`) VALUES
(2, 0),
(2, 1),
(2, 2),
(2, 3),
(2, 4),
(2, 5),
(6, 0),
(6, 1),
(6, 2),
(6, 3),
(6, 4),
(6, 5),
(7, 1),
(7, 2),
(7, 3),
(7, 5),
(8, 1),
(8, 2),
(8, 5),
(12, 0),
(12, 1),
(12, 3),
(12, 4),
(12, 5),
(15, 0),
(15, 1),
(15, 2),
(15, 3),
(15, 4),
(15, 5),
(16, 0),
(16, 1),
(16, 2),
(16, 3),
(16, 4),
(16, 5),
(17, 0),
(17, 1),
(17, 2),
(17, 4),
(17, 5),
(19, 0),
(19, 5),
(20, 0),
(20, 2),
(20, 3),
(20, 4),
(20, 5),
(22, 0),
(22, 1),
(22, 2),
(22, 3),
(22, 4),
(22, 5),
(23, 0),
(23, 1),
(23, 2),
(23, 3),
(23, 4),
(23, 5),
(24, 0),
(24, 1),
(24, 2),
(24, 3),
(24, 4),
(24, 5),
(26, 0),
(26, 2),
(26, 3),
(26, 4),
(26, 5),
(32, 0),
(32, 1),
(32, 2),
(32, 3),
(32, 4),
(32, 5);

-- --------------------------------------------------------

--
-- Table structure for table `supermarkets`
--

CREATE TABLE `supermarkets` (
  `id` int(11) NOT NULL,
  `square_meters` int(11) DEFAULT 0,
  `days_open` varchar(45) COLLATE utf8mb4_unicode_ci DEFAULT 'everyday',
  `times` varchar(45) COLLATE utf8mb4_unicode_ci DEFAULT '00:00-00:00',
  `street_name` varchar(45) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `street_number` smallint(6) DEFAULT NULL,
  `city` varchar(45) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `state` varchar(45) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `zipcode` int(6) DEFAULT NULL,
  `phone_number` bigint(20) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `supermarkets`
--

INSERT INTO `supermarkets` (`id`, `square_meters`, `days_open`, `times`, `street_name`, `street_number`, `city`, `state`, `zipcode`, `phone_number`) VALUES
(2, 255, 'dailysaturday', '06:00-20:00', 'Sugarland', 198, 'Austin', 'Texas', 15122, 9653217484),
(6, 103, 'daily', '8:00-19:00', 'Cum ut quo odio.', 62, 'North Icie', 'Oklahoma', 87438, 1591426593),
(7, 478, 'everyday', '10:00-22:00', 'Rerum magnam ab.', 47, 'East Maxiemouth', 'Minnesota', 89903, 1517754866),
(8, 381, 'daily', '10:00-22:00', 'Akualo De Pringle', 90, 'Susiemouth', 'NewJersey', 15122, 2105426987),
(12, 145, 'everyday', '08:00-21:00', 'Possum', 34, 'Sugarland', 'Austin', 15122, 21054639874),
(15, 705, 'everyday', '8:00-19:00', 'Eum saepe.', 42, 'Port Raegan', 'Virginia', 73089, 1235984533),
(16, 457, 'dailyandsaturaday', '10:00-22:00', 'Animi repellat quia.', 10, 'Faheyton', 'Virginia', 36042, 1450925389),
(17, 746, 'dailyandsaturaday', '10:00-22:00', 'Enim ad velit.', 66, 'Declanchester', 'Minnesota', 65404, 1681407848),
(19, 440, 'daily', '8:00-19:00', 'Ut et quisquam.', 71, 'Swaniawskitown', 'NewMexico', 96854, 1028011930),
(20, 107, 'everyday', '8:00-19:00', 'Ut ipsam hic quis.', 43, 'East Reidside', 'Hawaii', 61284, 1411349470),
(22, 912, 'everyday', '10:00-22:00', 'Cumque similique.', 61, 'Cummingsside', 'Maine', 69764, 1920197315),
(23, 245, 'daily', '00:00-12:20', 'oij ouk anak', 34, 'oij', 'akata', 11512, 23333),
(24, 267, 'everyday', '10:00-22:00', 'Sapiente earum.', 10, 'Bradlytown', 'Oregon', 15667, 1903540356),
(26, 520, 'everyday', '10:00-22:00', 'Non nam rem nam est.', 94, 'Lolitamouth', 'Idaho', 57779, 1734184449),
(32, 126, 'everyday', '8:00-19:00', 'Fuga non deleniti.', 57, 'Andreanestad', 'Maine', 92996, 1463139784),
(87, 255, 'dailysaturday', '06:00-20:00', 'Sugarland', 198, 'Austin', 'Texas', 15122, 9653217485);

-- --------------------------------------------------------

--
-- Table structure for table `transcaction`
--

CREATE TABLE `transcaction` (
  `id` int(11) NOT NULL,
  `payment_method` varchar(45) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'cash',
  `card_id` int(11) DEFAULT NULL,
  `date` datetime DEFAULT NULL,
  `store_id` int(11) DEFAULT NULL,
  `total_price` float NOT NULL DEFAULT 0
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `transcaction`
--

INSERT INTO `transcaction` (`id`, `payment_method`, `card_id`, `date`, `store_id`, `total_price`) VALUES
(1, 'cash', 22, '1999-07-25 11:57:07', 24, 953.29),
(2, 'debit', 0, '2002-04-04 15:27:49', 32, 500.85),
(3, 'credit', 29, '2005-01-07 09:47:27', 24, 485.34),
(4, 'credit', 27, '2010-01-28 10:51:46', 20, 596.79),
(5, 'cash', 39, '1992-12-10 20:41:31', 32, 97.68),
(6, 'cash', 26, '2008-05-10 14:42:42', 17, 495.4),
(7, 'cash', 7, '2009-04-21 15:01:58', 22, 1998.71),
(8, 'cash', 39, '1994-02-22 17:42:54', 26, 1903.86),
(9, 'debit', 33, '1997-05-07 20:49:52', 26, 1326.87),
(10, 'debit', 23, '2018-06-13 20:12:03', 16, 1986.57),
(11, 'cash', 31, '2017-06-16 14:02:16', 23, 648.14),
(12, 'credit', 20, '1995-05-31 18:46:56', 20, 36),
(13, 'credit', 38, '1997-09-08 18:28:36', 32, 983.49),
(14, 'debit', 23, '1991-10-06 11:38:40', 15, 2085.71),
(15, 'cash', 10, '1991-01-30 18:00:00', 22, 1466.8),
(16, 'cash', 37, '2010-09-25 20:03:23', 26, 569.36),
(17, 'debit', 13, '1999-07-04 17:51:39', 19, 448.63),
(18, 'debit', 15, '2015-06-04 14:16:25', 17, 1563.5),
(19, 'cash', 18, '1995-12-12 13:04:34', 12, 2677.4),
(20, 'cash', 29, '1999-07-23 14:43:46', 8, 694.35),
(21, 'cash', 12, '1991-11-03 12:21:10', 24, 1237.93),
(22, 'debit', 8, '1993-04-30 18:19:23', 20, 1638.53),
(23, 'credit', 27, '2014-02-01 13:13:50', 16, 712.2),
(24, 'credit', 38, '2001-01-24 19:42:57', 26, 1592.99),
(25, 'cash', 21, '2001-06-02 08:58:47', 8, 949.45),
(26, 'debit', 0, '2001-03-26 10:54:48', 24, 402.27),
(27, 'debit', 5, '2010-08-27 15:21:22', 17, 1023.09),
(28, 'debit', 19, '2005-01-16 16:16:45', 22, 746.38),
(29, 'cash', 39, '1992-07-23 10:45:02', 22, 393.23),
(30, 'debit', 13, '1993-09-04 17:09:35', 8, 46.91),
(31, 'cash', 16, '1996-11-19 08:34:11', 2, 1204.8),
(32, 'cash', 14, '1992-12-30 18:53:17', 16, 662.04),
(33, 'debit', 16, '2000-08-01 20:42:47', 23, 309.87),
(34, 'credit', 26, '2016-05-19 17:00:40', 2, 1003.54),
(35, 'debit', 31, '1997-04-01 18:00:09', 22, 2347.62),
(36, 'credit', 21, '1990-05-03 15:19:34', 32, 1978.26),
(37, 'debit', 31, '1991-09-05 12:53:56', 24, 1575.25),
(38, 'debit', 18, '2003-08-04 16:49:30', 15, 1852.61),
(39, 'cash', 18, '2000-01-14 20:50:38', 6, 907.89),
(40, 'debit', 3, '1999-09-04 09:48:42', 15, 1461.53),
(41, 'cash', 8, '2011-03-04 12:44:15', 26, 1936.28),
(42, 'cash', 39, '1991-08-03 16:00:44', 2, 1264.18),
(43, 'debit', 37, '2012-02-25 08:40:18', 22, 204.23),
(44, 'debit', 37, '1998-11-20 11:06:18', 12, 757.17),
(45, 'cash', 12, '1993-06-13 13:04:13', 17, 879.39),
(46, 'cash', 29, '1995-08-10 15:55:53', 20, 284.91),
(47, 'debit', 27, '1999-01-24 18:51:50', 26, 388.84),
(48, 'debit', 16, '2007-08-10 08:25:19', 2, 2495.08),
(49, 'credit', 16, '1993-09-06 13:01:26', 32, 599.74),
(50, 'credit', 30, '2007-12-15 10:34:42', 23, 1994.53),
(51, 'cash', 5, '1999-02-02 09:19:41', 12, 473.33),
(52, 'cash', 22, '1992-11-17 08:40:53', 24, 1402.68),
(53, 'debit', 16, '2014-03-31 14:33:55', 20, 1007.19),
(54, 'credit', 6, '2001-04-14 19:11:39', 16, 1215.62),
(55, 'cash', 29, '2013-12-04 16:00:09', 23, 2160.16),
(56, 'cash', 16, '1997-11-14 08:10:13', 2, 1413.58),
(57, 'cash', 19, '2004-03-09 10:32:24', 22, 1425.1),
(58, 'debit', 18, '1996-12-12 19:24:22', 15, 612.39),
(59, 'credit', 29, '1992-11-02 19:47:42', 7, 796.64),
(60, 'credit', 16, '2004-09-01 17:53:00', 16, 399.5),
(61, 'debit', 33, '1990-12-20 10:36:17', 16, 346.31),
(62, 'credit', 25, '2014-05-11 13:32:54', 16, 1834.25),
(63, 'debit', 12, '2015-05-30 11:31:15', 17, 1473.62),
(64, 'credit', 37, '1996-12-20 14:45:23', 16, 318.3),
(65, 'debit', 23, '2015-11-07 09:32:34', 2, 1361.84),
(66, 'cash', 1, '2014-02-06 20:58:16', 12, 286.28),
(67, 'cash', 37, '1997-04-16 14:02:12', 2, 734.07),
(68, 'debit', 37, '2014-06-18 10:17:17', 6, 3325.88),
(69, 'debit', 10, '2014-09-04 20:33:25', 22, 1387.88),
(70, 'debit', 39, '2011-06-04 08:09:51', 6, 1883.09),
(71, 'cash', 24, '1999-11-20 12:32:52', 26, 1070.7),
(72, 'cash', 4, '2012-05-10 09:19:23', 6, 2521.6),
(73, 'cash', 5, '2004-08-15 20:22:10', 7, 1221.72),
(74, 'cash', 15, '2000-06-22 08:01:12', 6, 1039.41),
(75, 'debit', 23, '2005-02-13 13:31:12', 2, 1236.4),
(76, 'credit', 27, '2017-04-12 12:35:58', 24, 3186.11),
(77, 'cash', 21, '2013-08-19 10:19:27', 16, 869.86),
(78, 'debit', 13, '2001-09-21 09:10:33', 23, 1349.88),
(79, 'credit', 27, '1991-12-20 13:15:13', 32, 237.34),
(80, 'cash', 37, '2018-07-25 20:17:05', 15, 444.29);

--
-- Triggers `transcaction`
--
DELIMITER $$
CREATE TRIGGER `TotalPriceCheck` BEFORE UPDATE ON `transcaction` FOR EACH ROW IF NEW.total_price < 0 THEN
SET NEW.total_price =0;
END IF
$$
DELIMITER ;

--
-- Indexes for dumped tables
--

--
-- Indexes for table `carries`
--
ALTER TABLE `carries`
  ADD PRIMARY KEY (`store_id`,`barcode`),
  ADD UNIQUE KEY `Unique` (`store_id`,`barcode`),
  ADD KEY `barcode_index` (`barcode`),
  ADD KEY `store_index` (`store_id`);

--
-- Indexes for table `category`
--
ALTER TABLE `category`
  ADD PRIMARY KEY (`category_id`),
  ADD UNIQUE KEY `catidx` (`category_id`);

--
-- Indexes for table `contains`
--
ALTER TABLE `contains`
  ADD PRIMARY KEY (`transcaction_id`,`barcode`),
  ADD UNIQUE KEY `Unique` (`transcaction_id`,`barcode`),
  ADD KEY `item_idx` (`barcode`);

--
-- Indexes for table `customer`
--
ALTER TABLE `customer`
  ADD PRIMARY KEY (`card_id`),
  ADD UNIQUE KEY `card_id_UNIQUE` (`card_id`);

--
-- Indexes for table `item`
--
ALTER TABLE `item`
  ADD PRIMARY KEY (`Barcode`),
  ADD UNIQUE KEY `Barcode_UNIQUE` (`Barcode`),
  ADD KEY `category_id_idx` (`category_id`);

--
-- Indexes for table `price_change`
--
ALTER TABLE `price_change`
  ADD PRIMARY KEY (`date`,`barcode`),
  ADD UNIQUE KEY `Unique` (`date`,`barcode`),
  ADD KEY `barcode_idx` (`barcode`);

--
-- Indexes for table `provides`
--
ALTER TABLE `provides`
  ADD PRIMARY KEY (`store_id`,`category_id`),
  ADD UNIQUE KEY `Unique` (`store_id`,`category_id`),
  ADD KEY `category_id_idx` (`category_id`);

--
-- Indexes for table `supermarkets`
--
ALTER TABLE `supermarkets`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `supermarket_id_UNIQUE` (`id`);

--
-- Indexes for table `transcaction`
--
ALTER TABLE `transcaction`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `transcaction_id_UNIQUE` (`id`),
  ADD KEY `customer_fk_idx` (`card_id`),
  ADD KEY `store_fk_idx` (`store_id`);

--
-- AUTO_INCREMENT for dumped tables
--

--
-- AUTO_INCREMENT for table `contains`
--
ALTER TABLE `contains`
  MODIFY `transcaction_id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=105;

--
-- AUTO_INCREMENT for table `transcaction`
--
ALTER TABLE `transcaction`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=81;

--
-- Constraints for dumped tables
--

--
-- Constraints for table `carries`
--
ALTER TABLE `carries`
  ADD CONSTRAINT `item` FOREIGN KEY (`barcode`) REFERENCES `item` (`Barcode`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `store` FOREIGN KEY (`store_id`) REFERENCES `supermarkets` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Constraints for table `contains`
--
ALTER TABLE `contains`
  ADD CONSTRAINT `item_fk` FOREIGN KEY (`barcode`) REFERENCES `item` (`Barcode`) ON DELETE CASCADE,
  ADD CONSTRAINT `transcaction` FOREIGN KEY (`transcaction_id`) REFERENCES `transcaction` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Constraints for table `item`
--
ALTER TABLE `item`
  ADD CONSTRAINT `category` FOREIGN KEY (`category_id`) REFERENCES `category` (`category_id`) ON DELETE SET NULL ON UPDATE SET NULL;

--
-- Constraints for table `price_change`
--
ALTER TABLE `price_change`
  ADD CONSTRAINT `barcode` FOREIGN KEY (`barcode`) REFERENCES `item` (`Barcode`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Constraints for table `provides`
--
ALTER TABLE `provides`
  ADD CONSTRAINT `category_id` FOREIGN KEY (`category_id`) REFERENCES `category` (`category_id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `store_id` FOREIGN KEY (`store_id`) REFERENCES `supermarkets` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Constraints for table `transcaction`
--
ALTER TABLE `transcaction`
  ADD CONSTRAINT `customer_fk` FOREIGN KEY (`card_id`) REFERENCES `customer` (`card_id`) ON DELETE SET NULL ON UPDATE SET NULL,
  ADD CONSTRAINT `store_fk` FOREIGN KEY (`store_id`) REFERENCES `supermarkets` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
